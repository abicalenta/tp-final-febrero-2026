<div class="formContainer">
  <header>
    @if (isEditing) {
      <h2 class="formTitle">âœï¸ Editar CategorÃ­a</h2>
    } @else {
      <h2 class="formTitle">ğŸ“‚ Nueva CategorÃ­a</h2>
    }
  </header>

  <form (ngSubmit)="handleFormSubmission(newCategoryForm)" #newCategoryForm="ngForm" class="mainForm">
    
    <div class="inputGroup">
      <label for="name" class="inputLabel">Nombre de la categorÃ­a</label>
      <input id="name" type="text" name="name" placeholder="Ej: Bebidas, Postres..."
             ngModel #name="ngModel" required minlength="2" class="inputField">
      
      @if (name.dirty && name.invalid) {
        <p class="errorMessage">El nombre es obligatorio (min 2 letras).</p>
      }
    </div>

    @if (errorBack) {
      <p class="globalError">No se pudo guardar la categorÃ­a. Intente nuevamente.</p>
    }

    <div class="actionButtons">
      <button class="saveButton" [disabled]="newCategoryForm.invalid || isLoading">
        @if (isLoading) {
          <span class="loader"></span> Guardando...
        } @else {
          {{ isEditing ? 'Guardar Cambios' : 'Crear CategorÃ­a' }}
        }
      </button>

      <a routerLink="/perfiles" class="cancelButton">Cancelar</a>
    </div>

  </form>
</div>
